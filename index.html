
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Starlink Prices — Europe & Ukraine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #181818; color: #eee; margin: 0; padding: 40px; }
    h1 { text-align: center; }
    .controls { max-width: 800px; margin: 20px auto; text-align: center; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
    .converter, .search-box { margin: 10px 0; }
    input[type="text"], select { padding: 8px; font-size: 1em; border-radius: 5px; background: #23272a; color: #eee; border: 1px solid #36393e; }
    .error { color: #ff5555; font-size: 0.9em; margin-top: 10px; display: none; width: 100%; }
    table { border-collapse: collapse; width: 100%; max-width: 800px; margin: 20px auto; background: #23272a; border-radius: 10px; overflow: hidden; }
    th, td { padding: 10px 14px; border-bottom: 1px solid #36393e; text-align: left; }
    th { background: #2c2f33; color: #f9d923; font-size: 1.08em; cursor: pointer; user-select: none; }
    th:hover { background: #36393e; }
    td:first-child, th:first-child { text-align: left; }
    td.price, th.price-header { text-align: right; }
    tr:nth-child(even) { background: #202225; }
    tr:hover { background: #292b2f; }

    @media (max-width: 600px) {
      body { padding: 10px; }
      h1 { font-size: 1.3em; }
      .controls { flex-direction: column; gap: 10px; }
      table, thead, tbody, th, td, tr { display: block; width: 100%; }
      thead { display: none; }
      tr { margin-bottom: 15px; background: #23272a; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.14); padding: 10px; }
      td { text-align: right; padding: 8px 12px; border: none; position: relative; font-size: 1em; display: flex; justify-content: space-between; align-items: center; }
      td:before { content: attr(data-label); font-weight: bold; color: #f9d923; text-align: left; padding-right: 10px; }
      td.price { justify-content: flex-end; }
      td.price:before { position: absolute; left: 12px; }
    }
  </style>
</head>
<body>
  <h1>Starlink Prices (Europe & Ukraine)</h1>
  <div class="controls">
    <div class="search-box">
        <label for="searchInput">Search Country: </label>
        <input type="text" id="searchInput" onkeyup="searchCountry()" placeholder="Enter country name...">
    </div>
    <div class="converter">
      <label for="currency">Select Currency: </label>
      <select id="currency" onchange="convertCurrency()">
        <option value="EUR">EUR</option> <option value="USD">USD</option> <option value="GBP">GBP</option>
        <option value="UAH">UAH</option> <option value="PLN">PLN</option> <option value="CZK">CZK</option>
        <option value="SEK">SEK</option> <option value="DKK">DKK</option> <option value="NOK">NOK</option> <option value="CHF">CHF</option>
      </select>
    </div>
    <div id="error-message" class="error">Failed to load exchange rates. Using default prices in EUR.</div>
  </div>
  <table id="pricesTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Country</th>
        <th onclick="sortTable(1)" class="price-header">Mini Price</th>
        <th onclick="sortTable(2)" class="price-header">Standard Price</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="Country">Albania</td>
        <td data-label="Mini Price" class="price" data-eur="226.03">226.03</td>
        <td data-label="Standard Price" class="price" data-eur="357.75">357.75</td>
    </tr><tr>
        <td data-label="Country">Austria</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Belgium</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Bulgaria</td>
        <td data-label="Mini Price" class="price" data-eur="224.97">224.97</td>
        <td data-label="Standard Price" class="price" data-eur="347.68">347.68</td>
    </tr><tr>
        <td data-label="Country">Croatia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Cyprus</td>
        <td data-label="Mini Price" class="price" data-eur="299.0">299.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Czechia</td>
        <td data-label="Mini Price" class="price" data-eur="226.03">226.03</td>
        <td data-label="Standard Price" class="price" data-eur="358.38">358.38</td>
    </tr><tr>
        <td data-label="Country">Denmark</td>
        <td data-label="Mini Price" class="price" data-eur="225.01">225.01</td>
        <td data-label="Standard Price" class="price" data-eur="233.18">233.18</td>
    </tr><tr>
        <td data-label="Country">Estonia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Faroe Islands</td>
        <td data-label="Mini Price" class="price" data-eur="225.01">225.01</td>
        <td data-label="Standard Price" class="price" data-eur="375.24">375.24</td>
    </tr><tr>
        <td data-label="Country">Finland</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="229.0">229.0</td>
    </tr><tr>
        <td data-label="Country">France</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Germany</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Greece</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Hungary</td>
        <td data-label="Mini Price" class="price" data-eur="226.78">226.78</td>
        <td data-label="Standard Price" class="price" data-eur="344.63">344.63</td>
    </tr><tr>
        <td data-label="Country">Iceland</td>
        <td data-label="Mini Price" class="price" data-eur="225.07">225.07</td>
        <td data-label="Standard Price" class="price" data-eur="369.26">369.26</td>
    </tr><tr>
        <td data-label="Country">Ireland</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Italy</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Kosovo</td>
        <td data-label="Mini Price" class="price" data-eur="299.0">299.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Latvia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Lithuania</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Luxembourg</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Malta</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Moldova</td>
        <td data-label="Mini Price" class="price" data-eur=""></td>
        <td data-label="Standard Price" class="price" data-eur="362.58">362.58</td>
    </tr><tr>
        <td data-label="Country">Netherlands</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">North Macedonia</td>
        <td data-label="Mini Price" class="price" data-eur="224.66">224.66</td>
        <td data-label="Standard Price" class="price" data-eur="348.75">348.75</td>
    </tr><tr>
        <td data-label="Country">Norway</td>
        <td data-label="Mini Price" class="price" data-eur="223.58">223.58</td>
        <td data-label="Standard Price" class="price" data-eur="225.35">225.35</td>
    </tr><tr>
        <td data-label="Country">Poland</td>
        <td data-label="Mini Price" class="price" data-eur="224.38">224.38</td>
        <td data-label="Standard Price" class="price" data-eur="352.2">352.2</td>
    </tr><tr>
        <td data-label="Country">Portugal</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Romania</td>
        <td data-label="Mini Price" class="price" data-eur="224.63">224.63</td>
        <td data-label="Standard Price" class="price" data-eur="335.08">335.08</td>
    </tr><tr>
        <td data-label="Country">Slovakia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Slovenia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Spain</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Svalbard and Jan Mayen</td>
        <td data-label="Mini Price" class="price" data-eur="378.39">378.39</td>
        <td data-label="Standard Price" class="price" data-eur="336.34">336.34</td>
    </tr><tr>
        <td data-label="Country">Sweden</td>
        <td data-label="Mini Price" class="price" data-eur="222.25">222.25</td>
        <td data-label="Standard Price" class="price" data-eur="239.3">239.3</td>
    </tr><tr>
        <td data-label="Country">Switzerland</td>
        <td data-label="Mini Price" class="price" data-eur="247.14">247.14</td>
        <td data-label="Standard Price" class="price" data-eur="351.98">351.98</td>
    </tr><tr>
        <td data-label="Country">Ukraine</td>
        <td data-label="Mini Price" class="price" data-eur=""></td>
        <td data-label="Standard Price" class="price" data-eur="500.94">500.94</td>
    </tr><tr>
        <td data-label="Country">United Kingdom</td>
        <td data-label="Mini Price" class="price" data-eur="217.39">217.39</td>
        <td data-label="Standard Price" class="price" data-eur="343.92">343.92</td>
    </tr>
    </tbody>
  </table>
  <script>
    let exchangeRates = {};
    // Зберігаємо поточний стан сортування
    let sortState = { column: 0, direction: 'asc' };

    async function fetchExchangeRates() {
      try {
        const response = await fetch('https://v6.exchangerate-api.com/v6/5367321dfae0db753504e8c2/latest/EUR');
        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        const data = await response.json();
        if (data.result === 'error') throw new Error(`API error: ${data['error-type']}`);
        exchangeRates = data.conversion_rates;
        exchangeRates['EUR'] = 1.0;
        return exchangeRates;
      } catch (error) {
        console.error('Error fetching exchange rates:', error.message);
        document.getElementById('error-message').style.display = 'block';
        return { 'EUR': 1, 'USD': 1, 'GBP': 1, 'UAH': 1, 'PLN': 1, 'CZK': 1, 'SEK': 1, 'DKK': 1, 'NOK': 1, 'CHF': 1 };
      }
    }

    async function convertCurrency() {
      if (Object.keys(exchangeRates).length === 0) {
         await fetchExchangeRates();
      }
      const currency = document.getElementById('currency').value;
      const rate = exchangeRates[currency] || 1;
      document.querySelectorAll('.price').forEach(cell => {
        const eurPrice = cell.getAttribute('data-eur');
        if (eurPrice && !isNaN(parseFloat(eurPrice))) {
          const convertedPrice = (parseFloat(eurPrice) * rate).toFixed(2);
          cell.textContent = `${convertedPrice} ${currency}`;
        } else {
          cell.textContent = 'N/A';
        }
      });
    }

    function searchCountry() {
        const input = document.getElementById("searchInput");
        const filter = input.value.toUpperCase();
        const tbody = document.getElementById("pricesTable").getElementsByTagName("tbody")[0];
        const rows = tbody.getElementsByTagName("tr");

        for (let i = 0; i < rows.length; i++) {
            const countryCell = rows[i].getElementsByTagName("td")[0];
            if (countryCell) {
                const txtValue = countryCell.textContent || countryCell.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    }

    function sortTable(columnIndex) {
        const table = document.getElementById("pricesTable");
        const tbody = table.tBodies[0];
        const rows = Array.from(tbody.rows);
        const isNumeric = columnIndex > 0;

        // Визначаємо напрямок сортування
        let direction = 'asc';
        if (sortState.column === columnIndex && sortState.direction === 'asc') {
            direction = 'desc';
        }
        
        sortState = { column: columnIndex, direction: direction };

        rows.sort((a, b) => {
            const cellA = a.cells[columnIndex];
            const cellB = b.cells[columnIndex];

            let valA, valB;

            if (isNumeric) {
                // Використовуємо data-eur для сортування цін
                valA = parseFloat(cellA.dataset.eur) || -1; // -1 для N/A, щоб вони були на початку
                valB = parseFloat(cellB.dataset.eur) || -1;
            } else {
                // Сортування за текстом для назв країн
                valA = cellA.textContent.trim();
                valB = cellB.textContent.trim();
            }
            
            let comparison = 0;
            if (valA > valB) {
                comparison = 1;
            } else if (valA < valB) {
                comparison = -1;
            }

            return direction === 'asc' ? comparison : comparison * -1;
        });

        // Очищуємо та заново додаємо відсортовані рядки
        while (tbody.firstChild) {
            tbody.removeChild(tbody.firstChild);
        }
        rows.forEach(row => tbody.appendChild(row));
    }

    // Викликаємо конвертацію при завантаженні сторінки
    document.addEventListener('DOMContentLoaded', convertCurrency);
  </script>
</body>
</html>
