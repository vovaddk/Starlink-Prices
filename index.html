
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Starlink Prices — Europe & Ukraine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      background: #181818; 
      color: #eee; 
      margin: 0; 
      padding: 20px; 
    }
    
    h1 { 
      text-align: center; 
      margin: 20px 0; 
      font-size: 1.8em; 
    }
    
    .controls { 
      background: #23272a; 
      border-radius: 10px; 
      padding: 20px; 
      margin: 20px auto; 
      max-width: 800px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
    }
    
    .control-row { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 20px; 
      align-items: center; 
      justify-content: center; 
      margin-bottom: 15px; 
    }
    
    .control-row:last-child { 
      margin-bottom: 0; 
    }
    
    .control-group { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      min-width: 160px; 
    }
    
    .control-group label { 
      color: #f9d923; 
      font-weight: bold; 
      margin-bottom: 8px; 
      font-size: 0.95em; 
    }
    
    input[type="text"], select { 
      padding: 12px; 
      font-size: 1em; 
      border-radius: 8px; 
      background: #2c2f33; 
      color: #eee; 
      border: 2px solid #36393e; 
      width: 100%; 
      max-width: 160px; 
      transition: border-color 0.3s ease; 
    }
    
    input[type="text"]:focus, select:focus { 
      outline: none; 
      border-color: #f9d923; 
    }
    
    .error { 
      color: #ff5555; 
      font-size: 0.9em; 
      text-align: center; 
      margin-top: 15px; 
      display: none; 
      padding: 10px; 
      background: rgba(255, 85, 85, 0.1); 
      border-radius: 8px; 
    }
    
    table { 
      border-collapse: collapse; 
      width: 100%; 
      max-width: 800px; 
      margin: 20px auto; 
      background: #23272a; 
      border-radius: 10px; 
      overflow: hidden; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
    }
    
    th, td { 
      padding: 12px 16px; 
      border-bottom: 1px solid #36393e; 
      text-align: left; 
    }
    
    th { 
      background: #2c2f33; 
      color: #f9d923; 
      font-size: 1.1em; 
      cursor: pointer; 
      user-select: none; 
      transition: background-color 0.3s ease; 
    }
    
    th:hover { 
      background: #36393e; 
    }
    
    td:first-child, th:first-child { 
      text-align: left; 
    }
    
    td.price, th.price-header { 
      text-align: right; 
    }
    
    tr:nth-child(even) { 
      background: #202225; 
    }
    
    tr:hover { 
      background: #292b2f; 
    }

    /* Мобільні стилі */
    @media (max-width: 768px) {
      body { 
        padding: 15px; 
      }
      
      h1 { 
        font-size: 1.5em; 
        margin: 15px 0; 
      }
      
      .controls { 
        padding: 15px; 
        margin: 15px auto; 
      }
      
      .control-row { 
        flex-direction: column; 
        gap: 15px; 
        align-items: stretch; 
      }
      
      .control-group { 
        width: 100%; 
        min-width: unset; 
        align-items: stretch; 
      }
      
      input[type="text"], select { 
        max-width: 100%; 
        padding: 14px; 
      }
      
      table, thead, tbody, th, td, tr { 
        display: block; 
        width: 100%; 
      }
      
      thead { 
        display: none; 
      }
      
      tr { 
        margin-bottom: 15px; 
        background: #23272a; 
        border-radius: 10px; 
        box-shadow: 0 3px 8px rgba(0,0,0,0.2); 
        padding: 15px; 
        border: none; 
      }
      
      td { 
        text-align: right; 
        padding: 8px 0; 
        border: none; 
        position: relative; 
        font-size: 1em; 
        display: flex; 
        align-items: center; 
        border-bottom: 1px solid #36393e; 
      }
      
      td:last-child { 
        border-bottom: none; 
      }
      
      td:before { 
        content: attr(data-label); 
        font-weight: bold; 
        color: #f9d923; 
        text-align: left; 
        padding-right: 10px; 
        min-width: 120px; 
      }
    }
    
    @media (max-width: 480px) {
      body { 
        padding: 10px; 
      }
      
      .controls { 
        padding: 12px; 
      }
      
      h1 { 
        font-size: 1.3em; 
      }
    }
  </style>
</head>
<body>
  <h1>Starlink Prices (Europe & Ukraine)</h1>
  
  <div class="controls">
    <div class="control-row">
      <div class="control-group">
        <label for="searchInput">Search Country</label>
        <input type="text" id="searchInput" onkeyup="searchCountry()" placeholder="Enter country name...">
      </div>
      <div class="control-group">
        <label for="currency">Select Currency</label>
        <select id="currency" onchange="convertCurrency()">
          <option value="EUR">EUR</option>
          <option value="USD">USD</option>
          <option value="GBP">GBP</option>
          <option value="UAH">UAH</option>
          <option value="PLN">PLN</option>
          <option value="CZK">CZK</option>
          <option value="SEK">SEK</option>
          <option value="DKK">DKK</option>
          <option value="NOK">NOK</option>
          <option value="CHF">CHF</option>
        </select>
      </div>
      <div class="control-group">
        <label for="miniSort">Sort Mini</label>
        <select id="miniSort" onchange="applySorting()">
          <option value="none">No sorting</option>
          <option value="asc">Cheapest first</option>
          <option value="desc">Most expensive first</option>
        </select>
      </div>
      <div class="control-group">
        <label for="standardSort">Sort Standard</label>
        <select id="standardSort" onchange="applySorting()">
          <option value="none">No sorting</option>
          <option value="asc">Cheapest first</option>
          <option value="desc">Most expensive first</option>
        </select>
      </div>
    </div>
    <div id="error-message" class="error">Failed to load exchange rates. Using default prices in EUR.</div>
  </div>
  
  <table id="pricesTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Country</th>
        <th onclick="sortTable(1)" class="price-header">Mini Price</th>
        <th onclick="sortTable(2)" class="price-header">Standard Price</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="Country">Albania</td>
        <td data-label="Mini Price" class="price" data-eur="226.03">226.03</td>
        <td data-label="Standard Price" class="price" data-eur="357.75">357.75</td>
    </tr><tr>
        <td data-label="Country">Austria</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Belgium</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Bulgaria</td>
        <td data-label="Mini Price" class="price" data-eur="224.97">224.97</td>
        <td data-label="Standard Price" class="price" data-eur="347.68">347.68</td>
    </tr><tr>
        <td data-label="Country">Croatia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Cyprus</td>
        <td data-label="Mini Price" class="price" data-eur="299.0">299.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Czechia</td>
        <td data-label="Mini Price" class="price" data-eur="226.03">226.03</td>
        <td data-label="Standard Price" class="price" data-eur="358.38">358.38</td>
    </tr><tr>
        <td data-label="Country">Denmark</td>
        <td data-label="Mini Price" class="price" data-eur="225.01">225.01</td>
        <td data-label="Standard Price" class="price" data-eur="233.18">233.18</td>
    </tr><tr>
        <td data-label="Country">Estonia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Faroe Islands</td>
        <td data-label="Mini Price" class="price" data-eur="225.01">225.01</td>
        <td data-label="Standard Price" class="price" data-eur="375.24">375.24</td>
    </tr><tr>
        <td data-label="Country">Finland</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="229.0">229.0</td>
    </tr><tr>
        <td data-label="Country">France</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Germany</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Greece</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Hungary</td>
        <td data-label="Mini Price" class="price" data-eur="226.78">226.78</td>
        <td data-label="Standard Price" class="price" data-eur="344.63">344.63</td>
    </tr><tr>
        <td data-label="Country">Iceland</td>
        <td data-label="Mini Price" class="price" data-eur="225.07">225.07</td>
        <td data-label="Standard Price" class="price" data-eur="369.26">369.26</td>
    </tr><tr>
        <td data-label="Country">Ireland</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Italy</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Kosovo</td>
        <td data-label="Mini Price" class="price" data-eur="299.0">299.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Latvia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Lithuania</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Luxembourg</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Malta</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Moldova</td>
        <td data-label="Mini Price" class="price" data-eur=""></td>
        <td data-label="Standard Price" class="price" data-eur="362.58">362.58</td>
    </tr><tr>
        <td data-label="Country">Netherlands</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">North Macedonia</td>
        <td data-label="Mini Price" class="price" data-eur="224.66">224.66</td>
        <td data-label="Standard Price" class="price" data-eur="348.75">348.75</td>
    </tr><tr>
        <td data-label="Country">Norway</td>
        <td data-label="Mini Price" class="price" data-eur="223.58">223.58</td>
        <td data-label="Standard Price" class="price" data-eur="225.35">225.35</td>
    </tr><tr>
        <td data-label="Country">Poland</td>
        <td data-label="Mini Price" class="price" data-eur="224.38">224.38</td>
        <td data-label="Standard Price" class="price" data-eur="352.2">352.2</td>
    </tr><tr>
        <td data-label="Country">Portugal</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Romania</td>
        <td data-label="Mini Price" class="price" data-eur="224.63">224.63</td>
        <td data-label="Standard Price" class="price" data-eur="335.08">335.08</td>
    </tr><tr>
        <td data-label="Country">Slovakia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Slovenia</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Spain</td>
        <td data-label="Mini Price" class="price" data-eur="225.0">225.0</td>
        <td data-label="Standard Price" class="price" data-eur="349.0">349.0</td>
    </tr><tr>
        <td data-label="Country">Svalbard and Jan Mayen</td>
        <td data-label="Mini Price" class="price" data-eur="378.39">378.39</td>
        <td data-label="Standard Price" class="price" data-eur="336.34">336.34</td>
    </tr><tr>
        <td data-label="Country">Sweden</td>
        <td data-label="Mini Price" class="price" data-eur="222.25">222.25</td>
        <td data-label="Standard Price" class="price" data-eur="239.3">239.3</td>
    </tr><tr>
        <td data-label="Country">Switzerland</td>
        <td data-label="Mini Price" class="price" data-eur="247.14">247.14</td>
        <td data-label="Standard Price" class="price" data-eur="351.98">351.98</td>
    </tr><tr>
        <td data-label="Country">Ukraine</td>
        <td data-label="Mini Price" class="price" data-eur=""></td>
        <td data-label="Standard Price" class="price" data-eur="500.94">500.94</td>
    </tr><tr>
        <td data-label="Country">United Kingdom</td>
        <td data-label="Mini Price" class="price" data-eur="217.39">217.39</td>
        <td data-label="Standard Price" class="price" data-eur="343.92">343.92</td>
    </tr>
    </tbody>
  </table>
  
  <script>
    let exchangeRates = {};
    let sortState = { column: 0, direction: 'asc' };

    async function fetchExchangeRates() {
      try {
        const response = await fetch('https://v6.exchangerate-api.com/v6/5367321dfae0db753504e8c2/latest/EUR');
        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        const data = await response.json();
        if (data.result === 'error') throw new Error(`API error: ${data['error-type']}`);
        exchangeRates = data.conversion_rates;
        exchangeRates['EUR'] = 1.0;
        return exchangeRates;
      } catch (error) {
        console.error('Error fetching exchange rates:', error.message);
        document.getElementById('error-message').style.display = 'block';
        return { 'EUR': 1, 'USD': 1, 'GBP': 1, 'UAH': 1, 'PLN': 1, 'CZK': 1, 'SEK': 1, 'DKK': 1, 'NOK': 1, 'CHF': 1 };
      }
    }

    async function convertCurrency() {
      if (Object.keys(exchangeRates).length === 0) {
         await fetchExchangeRates();
      }
      const currency = document.getElementById('currency').value;
      const rate = exchangeRates[currency] || 1;
      document.querySelectorAll('.price').forEach(cell => {
        const eurPrice = cell.getAttribute('data-eur');
        if (eurPrice && !isNaN(parseFloat(eurPrice))) {
          const convertedPrice = (parseFloat(eurPrice) * rate).toFixed(2);
          cell.textContent = `${convertedPrice} ${currency}`;
        } else {
          cell.textContent = 'N/A';
        }
      });
    }

    function searchCountry() {
        const input = document.getElementById("searchInput");
        const filter = input.value.toUpperCase();
        const tbody = document.getElementById("pricesTable").getElementsByTagName("tbody")[0];
        const rows = tbody.getElementsByTagName("tr");

        for (let i = 0; i < rows.length; i++) {
            const countryCell = rows[i].getElementsByTagName("td")[0];
            if (countryCell) {
                const txtValue = countryCell.textContent || countryCell.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    }

    function applySorting() {
        const miniSort = document.getElementById("miniSort").value;
        const standardSort = document.getElementById("standardSort").value;
        
        // Якщо обидва фільтри вимкнені, повертаємо до алфавітного сортування
        if (miniSort === 'none' && standardSort === 'none') {
            sortTable(0); // Сортування за країною
            return;
        }
        
        const table = document.getElementById("pricesTable");
        const tbody = table.tBodies[0];
        const rows = Array.from(tbody.rows);
        
        rows.sort((a, b) => {
            let comparison = 0;
            
            // Спочатку сортуємо за Mini, якщо вибрано
            if (miniSort !== 'none') {
                const miniA = parseFloat(a.cells[1].dataset.eur) || -1;
                const miniB = parseFloat(b.cells[1].dataset.eur) || -1;
                
                if (miniA !== miniB) {
                    comparison = miniA > miniB ? 1 : -1;
                    return miniSort === 'asc' ? comparison : comparison * -1;
                }
            }
            
            // Потім сортуємо за Standard, якщо вибрано
            if (standardSort !== 'none') {
                const standardA = parseFloat(a.cells[2].dataset.eur) || -1;
                const standardB = parseFloat(b.cells[2].dataset.eur) || -1;
                
                if (standardA !== standardB) {
                    comparison = standardA > standardB ? 1 : -1;
                    return standardSort === 'asc' ? comparison : comparison * -1;
                }
            }
            
            // Якщо ціни однакові, сортуємо за назвою країни
            const nameA = a.cells[0].textContent.trim();
            const nameB = b.cells[0].textContent.trim();
            
            return nameA.localeCompare(nameB);
        });
        
        // Очищуємо та заново додаємо відсортовані рядки
        while (tbody.firstChild) {
            tbody.removeChild(tbody.firstChild);
        }
        rows.forEach(row => tbody.appendChild(row));
        
        // Скидаємо стан сортування таблиці
        sortState = { column: -1, direction: 'asc' };
    }

    function sortTable(columnIndex) {
        const table = document.getElementById("pricesTable");
        const tbody = table.tBodies[0];
        const rows = Array.from(tbody.rows);
        const isNumeric = columnIndex > 0;

        let direction = 'asc';
        if (sortState.column === columnIndex && sortState.direction === 'asc') {
            direction = 'desc';
        }
        
        sortState = { column: columnIndex, direction: direction };

        rows.sort((a, b) => {
            const cellA = a.cells[columnIndex];
            const cellB = b.cells[columnIndex];

            let valA, valB;

            if (isNumeric) {
                valA = parseFloat(cellA.dataset.eur) || -1;
                valB = parseFloat(cellB.dataset.eur) || -1;
            } else {
                valA = cellA.textContent.trim();
                valB = cellB.textContent.trim();
            }
            
            let comparison = 0;
            if (valA > valB) {
                comparison = 1;
            } else if (valA < valB) {
                comparison = -1;
            }

            return direction === 'asc' ? comparison : comparison * -1;
        });

        while (tbody.firstChild) {
            tbody.removeChild(tbody.firstChild);
        }
        rows.forEach(row => tbody.appendChild(row));
    }

    document.addEventListener('DOMContentLoaded', convertCurrency);
  </script>
</body>
</html>
